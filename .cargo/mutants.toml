# cargo-mutants configuration
# See: https://mutants.rs/configuration.html

# Enable all features including optional 'fun' feature
# Use first-class config key instead of additional_cargo_args
all_features = true

# Enable gitignore filtering to prevent copying large artifacts (context.txt, etc.)
gitignore = true

# Allow more time for complex tests
timeout_multiplier = 2.0

# Exclude test code and fuzz targets from mutation
exclude_globs = [
    "**/tests/**",
    "fuzz/**",
]

# Exclude boilerplate that's not worth mutating
exclude_re = [
    "impl.*Display",
    "fn main\\(",
    # Thin stdout wrappers - render functions are tested directly
    # Stdout capture is unreliable on Windows in tests
    "replace print_lang_report",
    "replace print_module_report",
    # Stub functions when feature is disabled - scoped to file path
    # These cfg(not(feature="fun")) stubs compile but are dead code with all_features
    "crates/tokmd-analysis-format/src/lib\\.rs:.*replace render_obj",
    "crates/tokmd-analysis-format/src/lib\\.rs:.*replace render_midi",
]
