# Run: 2026-01-30-gatekeeper-analysis-determinism

**Goal**: Maximize SRP-quality improvement per reviewer minute.
**Lane**: Scout discovery.

## Findings
Discovered that `derive_report` depends on sorting logic in `derived.rs`. While the logic appeared deterministic (using `BTreeMap` and `sort_by`), there was no regression test to ensure it remains so. A change to `HashMap` or removing a sort could break output stability.

## Decision
Option A: Add a deterministic property-based test.
- Creates random `ExportData`.
- Shuffles inputs.
- Asserts identical JSON output for `DerivedReport`.

## Changes
- Created `crates/tokmd-analysis/tests/determinism.rs`.
- Fixed unused field warning in `crates/tokmd-analysis/src/analysis.rs`.

## Verification
- `cargo test -p tokmd-analysis --test determinism` passed.
- Workspace tests passed.
