# Run 2025-02-18 (Sentinel)

**Lane**: Scout Discovery
**Target**: `crates/tokmd-core/src/ffi.rs` (Test Hardening)

## ðŸ”— Links
- Envelope: [.jules/security/envelopes/RUN-2025-02-18-003.json](../envelopes/RUN-2025-02-18-003.json)

## Findings
- Identified extensive usage of `unwrap()` in `crates/tokmd-core/src/ffi.rs` tests.
- Identified `unwrap()` usage in `crates/tokmd-core/src/error.rs` tests.
- These panics make test failures opaque and violate the "burn-down" quality stance.

## Options Considered
### Option A: Harden FFI tests (Recommended)
- Refactor tests to return `Result`.
- Use `?` for error propagation.
- Improves debuggability and aligns with quality goals.
- **Trade-offs**: Slightly more verbose test signatures.

### Option B: Fix Badge SVG parsing
- Refactor `crates/tokmd/src/badge.rs` helper.
- **Trade-offs**: Less central than FFI.

## Decision
Selected **Option A**. The FFI layer is a critical boundary, and robust tests there are higher value.
