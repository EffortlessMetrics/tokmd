# Run 2026-02-25

## ğŸ” Scout / Friction
Scouted `tokmd init` behavior.
Found that it only generates `.tokeignore` in non-interactive mode, and offers no way to generate `tokmd.toml` configuration without using the interactive wizard. This limits automation and scripting.

## ğŸ¯ Target
`tokmd init` non-interactive configuration generation.

## ğŸ” Findings
- `tokmd init` supports config generation only in interactive mode.
- Users automating setup cannot generate a default `tokmd.toml`.
- Help text was slightly misleading ("Write a .tokeignore template").

## ğŸ§¾ Receipts
- Added `--write-config` flag to `tokmd init`.
- Implemented `InitProfile::default_config` to provide sensible defaults per project type (Rust, Go, etc.) without wizard.
- Refactored `wizard.rs` to reuse this logic (DRY).
- Added unit tests for default configs.
- Verified manual run:
  ```bash
  $ tokmd init --non-interactive --write-config --template rust
  Created tokmd.toml
  Wrote ./.tokeignore
  ```
- Verified `tokmd.toml` content has correct defaults (e.g. `crates`, `src` roots for Rust).

## ğŸ§­ Options Considered
- **Option A (Chosen)**: Add `--write-config` flag. Explicit, enables automation, cleans up logic.
- **Option B**: Only update docs. Doesn't solve automation gap.

## âœ… Verification
- `cargo build`: PASS
- `cargo test`: PASS (all tests passed, including new ones)
- `cargo clippy`: PASS
- Manual verify: PASS
