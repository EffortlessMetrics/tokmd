# Run 2024-05-25 (Compat)

## ðŸŽ¯ Goal
Fix `cargo build --no-default-features` for `tokmd`.

## ðŸ”Ž Discovery
The build failed with:
- `unresolved import tokmd_cockpit` in `baseline.rs`
- Unused imports in `cockpit.rs` and `sensor.rs`

This was due to `tokmd-cockpit` being an optional dependency gated by `git` feature, but the code using it unconditionally.

## ðŸ§­ Options
- **Option A (Chosen):** Gate the usage with `#[cfg(feature = "git")]`. This restores the lightweight build.
- **Option B:** Move logic to core. Rejected as it's a larger refactor.

## ðŸ§± Changes
- `crates/tokmd/src/commands/baseline.rs`: Gated determinism logic.
- `crates/tokmd/src/commands/cockpit.rs`: Gated unused imports and tests.
- `crates/tokmd/src/commands/sensor.rs`: Gated unused imports and tests.

## ðŸ§ª Verification
- `cargo check --no-default-features` (lib): PASSED
- `cargo check --no-default-features --tests --lib -p tokmd`: PASSED
- `cargo check --all-features`: PASSED
