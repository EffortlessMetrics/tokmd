[package]
name = "tokmd"
version.workspace = true
edition.workspace = true
license.workspace = true
homepage.workspace = true
repository.workspace = true
description = "A stable interface for repo shape. Emits receipt-style summaries (Markdown/TSV) and machine-readable inventories (JSONL/CSV) for LLMs and pipelines."
readme = "README.md"
keywords = ["repo-analysis", "inventory", "llm-context", "receipts", "tokei"]
categories = ["command-line-utilities", "development-tools"]
default-run = "tokmd"
autobins = false
exclude = [
    ".github",
    ".gitignore",
    ".gitattributes",
    "CLAUDE.md",
    "TODO.md",
    "mutants.toml",
    "mutants.out",
    "mutants.out.old",
    "fuzz",
    "tests",
]

[features]
default = []
alias-tok = []

[[bin]]
name = "tokmd"
path = "src/bin/tokmd.rs"

[[bin]]
name = "tok"
path = "src/bin/tok.rs"
required-features = ["alias-tok"]

[dependencies]
anyhow = "1.0.100"
clap = { version = "4.5.54", features = ["derive"] }
tokmd-config = { path = "../tokmd-config", version = "1.0.0" }
tokmd-model = { path = "../tokmd-model", version = "1.0.0" }
tokmd-scan = { path = "../tokmd-scan", version = "1.0.0" }
tokmd-format = { path = "../tokmd-format", version = "1.0.0" }
tokmd-tokeignore = { path = "../tokmd-tokeignore", version = "1.0.0" }
tokmd-types = { path = "../tokmd-types", version = "1.0.0" }
clap_complete = "4.5.65"
dirs = "6.0.0"
serde_json = "1.0.149"

[dev-dependencies]
assert_cmd = "2.0.14"
predicates = "3.1.0"
tempfile = "3.10.1"
insta = { version = "1.39.0", features = ["json"] }
regex = "1.10.4"
proptest = "1.6.0"
serde_json = "1.0.149"
tokmd-model = { path = "../tokmd-model", version = "1.0.0" }
